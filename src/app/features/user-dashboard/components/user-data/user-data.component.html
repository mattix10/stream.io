<app-edit-header header="Dane" (editChanged)="isEditMode = $event" />

@if (isEditMode) {
<div class="user-data-item">
  <form [formGroup]="userDataForm">
    <div class="form-field">
      <div class="label">E-mail:</div>
      <input type="email" class="input" formControlName="email" />
    </div>

    <div class="form-field">
      <div class="label">Nazwa użytkownika:</div>
      <input type="email" class="input" formControlName="userName" />
    </div>

    @if (isContentCreator) {
    <div class="form-field">
      <label class="label" for="phoneNumber">Numer telefonu:</label>
      <input
        type="number"
        class="input"
        id="phoneNumber"
        formControlName="phoneNumber"
        [class.disabled]="!isContentCreator"
      />
    </div>

    <div class="form-field">
      <label class="label" for="nip">NIP:</label>
      <input
        type="number"
        class="input"
        id="nip"
        formControlName="nip"
        [class.disabled]="!isContentCreator"
      />
    </div>
    }

    <div class="form-field">
      <div class="label">Rola:</div>
      <select type="text" class="input disabled" formControlName="role">
        <option [selected]="user.userLevel">{{ user.userLevel }}</option>
      </select>
    </div>
  </form>
</div>

<button class="button" (click)="onSave()">
  @if (isLoading) {
  <app-spinner [diameter]="18"></app-spinner>
  } @else { Zapisz }
</button>
} @else {
<div class="user-data-item">
  <div class="form-field">
    <div class="label">E-mail:</div>
    <div class="user-data-item">{{ user.email }}</div>
  </div>
  <div class="form-field">
    <div class="label">Nazwa użytkownika:</div>
    <div class="user-data-item">{{ user.userName }}</div>
  </div>

  @if (isContentCreator) {
  <div class="form-field">
    <div class="label">Numer telefonu:</div>
    <div class="user-data-item">
      {{ user.phoneNumber ? user.phoneNumber : "-" }}
    </div>
  </div>
  <div class="form-field">
    <div class="label">NIP:</div>
    <div class="user-data-item">{{ user.nip ? user.nip : "-" }}</div>
  </div>
  }

  <div class="form-field">
    <div class="label">Rola:</div>
    <div class="user-data-item">
      {{ user.userLevel }}
    </div>
  </div>
</div>
}
