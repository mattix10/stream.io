<div class="user-dashboard dashboard container">
  <h1 class="header-primary">Moje konto</h1>

  @if (user) {
  <app-user-data [user]="user" (userDataChanged)="onUserDataChanged($event)" />
  }

  <div class="divider"></div>

  @if ((isContentCreator$ | async) || (isUserAdmin$ | async)) {
  <section class="movies-section">
    <div class="movie-form">
      <app-headers
        [isEditMode]="isEditMode"
        (editModeChanged)="onEditModeChange($event)"
      />

      @if (!isEditMode) {
      <app-movie-form
        (movieFormChanged)="onMovieFormChanged($event)"
        [isEditMode]="isEditMode"
      />
      } @else if (selectedMovieForEdit) {
      <app-movie-form
        (movieFormChanged)="onMovieFormChanged($event)"
        [isEditMode]="isEditMode"
        [movie]="selectedMovieForEdit"
      />
      } @else {
      <p>Wybierz z listy film, który chcesz edytować.</p>
      }
    </div>

    <div class="movie-list">
      <h2>Filmy</h2>

      @if (movies) {
      <app-expansion-panel-movie
        [movies]="movies"
        (removeMovieChanged)="onRemoveMovieChanged($event)"
      />
      } @else {
      <div>Aktualnie nie masz żadnych filmów.</div>
      }
    </div>
  </section>
  }
</div>
