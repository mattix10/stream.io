<div class="user-dashboard dashboard container">
  <h1 class="header-primary">
    {{
      isAdminUserEditMode ? "Konto użytkownika " + user?.userName : "Moje konto"
    }}
  </h1>

  @if (user) {
  <app-user-data
    [user]="user"
    [isAdminEditMode]="isAdminUserEditMode"
    (userDataChanged)="onUserDataChanged($event)"
  />
  }
  <!-- Czy admin, gdy edytuje użytkownika, to powinien korzystać z tego samego endpointu co użytkownik? -->

  <div class="divider"></div>

  @if (isContentCreator || isAdmin) {
  <section class="movies-section">
    <div class="movie-form">
      <app-headers
        [isEditMode]="isEditMode"
        (editModeChanged)="onEditModeChange($event)"
      />

      @if (isEditMode && !selectedMovieForEdit) {
      <p>Wybierz z listy film, który chcesz edytować.</p>
      } @else {
      <app-movie-form
        [isEditMode]="isEditMode"
        [movie]="selectedMovieForEdit"
      />
      }
    </div>

    <div class="movie-list">
      <h2>Filmy</h2>

      @if (movies) {
      <app-expansion-panel-movie
        [movies]="movies"
        (removeMovieChanged)="onRemoveMovieChanged($event)"
      />
      } @else {
      <div>Aktualnie brak dodanych filmów.</div>
      }
    </div>
  </section>
  }
</div>
