@if (movieMetadata) {
<div class="movie-container dashboard container">
  <div class="content">
    <div class="movie">
      @if (movieLink) {
      <app-video-player
        [movieLink]="movieLink"
        [isLicenseValid]="isLicenseValid"
      />
      } @if(!(isLoggedIn$ | async) || ((isLoggedIn$ | async) && !isLicenseValid
      && !movieLink)) {
      <app-movie-image
        [imageUrl]="movieMetadata.imageUrl"
        [isLoading]="isLoadingLicense"
      >
        @if (!isLicenseValid && !isLoadingLicense) {
        <app-license-dialog
          [licenseId]="licenseId"
          [licenseRules]="movieMetadata.licenseRules"
          [licenseDialogType]="licenseDialogType"
          [contentId]="uuid"
          (submitButtonChanged)="onSubmitLicense()"
        />
        }
      </app-movie-image>
      }

      <app-movie-metadata [movieMetadata]="movieMetadata" />

      <app-comments
        class="comments comments-desktop"
        [submitComment]="submitComment"
        [comments]="movieMetadata.contentComments"
        (commentChanged)="onCommentChanged($event)"
      />
    </div>
    <div class="recommended-movies">
      @for (movie of recommendedMovies; track movie) {
      <app-movie-item [movieMetadata]="movie" class="movie-item" />
      }
    </div>
  </div>
</div>
} @if (isLoading) {
<div class="spinner-wrapper">
  <app-spinner [diameter]="60" text="Trwa ładowanie danych" />
</div>
} @if (!isLoading && !movieMetadata) {
<div class="spinner-wrapper">Brak zawartości do wyświetlenia</div>
}
